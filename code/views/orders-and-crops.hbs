<!--
    // Citation
    // Date: 5/24/23
    // Referenced HTML from OSU CS340 NodeJS Starter Guide (Steps 4-8)
    // Table, Forms, variable names adjusted to match all attributes of our project
    // Source URL: https://github.com/osu-cs340-ecampus/nodejs-starter-app
    // Citation for this.parentElement.parentElement 
    // Source URL https://www.youtube.com/watch?v=-rNQeJi3Wp4 
-->

<title>Orders And Crops Details</title>
<header>Orders And Crops Details</header>

<main>
    <section>
        <article>
            <table id="orders-crops-table">

                {{!-- Header section --}}
                <thead>

                    {{!-- For just the first row, we print each key of the row object as a header cell so we
                    know what each column means when the page renders --}}
                    <tr>
                        <th>Order_Crop_Detail_ID</th>
                        <th>Order ID</th>
                        <th>Crop</th>
                        <th>Quantity Ordered</th>
                        <th>Subtotal</th>
                    </tr>
                </thead>

                {{!-- Body section --}}
                <tbody>

                    {{!-- For each row, print the id, fname, lname, homeworld and age, in order --}}
                    {{#each data}}
                    <tr data-value={{this.order_crop_detail_id}}>
                        <td>{{this.order_crop_detail_id}}</td>
                        <td class="hidden">{{this.order_id}}</td>
                        <td>{{this.order_ref_number}}</td>
                        <td>{{this.crop_id}}</td>
                        <td>{{this.quantity_ordered}}</td>
                        <td>{{this.subtotal}}</td>
                        <td><button onclick="autofillForm(this.parentElement.parentElement.rowIndex)">Populate Update Form</button></td>
                        <td><button onclick="return confirmDelete() && deleteOrderCropDetail({{this.order_crop_detail_id}})">Delete</button></td>
                    </tr>
                    {{/each}}
                </tbody>
            </table>

            <script src="./js/delete_orders_crops_detail.js"></script>

            <form id="add-order-crop-detail-form-ajax" onsubmit="return confirmAdd()">
                <fieldset>
                    <legend>Add Order And Crop Detail</legend>
                    <p>
                        <label for="input-order-id">Order ID:</label> <select name="input-order-id" id="input-order-id"
                            required>
                            <option value="">Select a Order ID</option>
                            {{#each orders}}
                            <option value="{{this.order_id}}">{{this.order_ref_number}}</option>
                            {{/each}}
                        </select>
                    </p>
                    <p>
                        <label for="input-crop-id">Crop Name:</label> <select name="input-crop-id" id="input-crop-id"
                            required>
                            <option value="">Select a Crop</option>
                            {{#each crops}}
                            <option value="{{this.crop_id}}">{{this.crop_name}}</option>
                            {{/each}}
                        </select>
                    </p>
                    <p>
                        <label for="input-quantity-ordered">Quantity Ordered:</label> <input type="number" min="0"
                            name="input-quantity-ordered" id="input-quantity-ordered" required>
                    </p>
                    <p>
                        <label for="input-subtotal">Subtotal:</label> <input type="number" min="0" step="0.01" name="input-subtotal"
                            id="input-subtotal" required>
                    </p>

                    <input type="submit" value="Add Orders And Crops Detail">
                </fieldset>
            </form>
            <script src="./js/add_orders_crops_detail.js"></script>

            <form id="update-order-crop-detail-form-ajax" onsubmit="return confirmUpdate()">
                <fieldset>
                    <legend>Update Order And Crop Detail</legend>
                    <p>
                        <label for="input-order-crop-detail-id-update">Order Crop Detail ID:</label> <select
                            name="input-order-crop-detail-id-update" id="mySelect" required>
                            <option value="">Select Order Crop Detail ID</option>
                            {{#each data}}
                            <option value="{{this.order_crop_detail_id}}">{{this.order_crop_detail_id}}</option>
                            {{/each}}
                        </select>
                    </p>
                    <p>
                        <label for="input-order-id-update">Order ID:</label> <select name="input-order-id-update"
                            id="input-order-id-update" required>
                            <option value="">Select a Order ID</option>
                            {{#each orders}}
                            <option value="{{this.order_id}}">{{this.order_ref_number}}</option>
                            {{/each}}
                        </select>
                    </p>
                    <p>
                        <label for="input-crop-id-update">Crop Name:</label> <select name="input-crop-id-update"
                            id="input-crop-id-update" required>
                            <option value="">Select a Crop</option>
                            {{#each crops}}
                            <option value="{{this.crop_id}}">{{this.crop_name}}</option>
                            {{/each}}
                        </select>
                    </p>
                    <p>
                        <label for="input-quantity-ordered-update">Quantity Ordered:</label> <input type="number" min="0"
                            name="input-quantity-ordered-update" id="input-quantity-ordered-update" required>
                    </p>
                    <p>
                        <label for="input-subtotal-update">Subtotal:</label> <input type="number" step="0.01" min="0"
                            name="input-subtotal-update" id="input-subtotal-update" required>
                    </p>

                    <input type="submit" value="Update Orders And Crops Detail">
                </fieldset>
            </form>
            <script src="./js/update_orders_crops_detail.js"></script>

        </article>
    </section>
</main>